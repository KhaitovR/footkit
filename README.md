# footkit

<!-- Цели -->
## Цели
Опираясь на статистику прошлых игр, необходимо построить РС и определить по потенциалу доходности лучшее событие на определенный матч.
В качестве исхода может быть все, что связано с голами (т.к. на данный момент другой статистики нет). П1, П2, Х, 1Х, Х2, Тоталы и тд.

<!-- Подход к прогнозированию -->
## Подход к прогнозированию
В каждом матче, считаем вероятность на каждый возможный исход в каждом матче.

* Через формулы считаю, что вероятность исхода "верная", определяю потенциальный доход через коэф. букмекера. 
* Затем выбираю самый доходный исход в каждом матче, если он есть.

Также, можно задать определенные границы риска, например, минимальная вероятность исхода >70% и коэф. события >1.3.

<!-- Сбор данных -->
## Сбор данных
Получаю данные из двух источников:
* Understat.com (Api)
* OddsPortal.com (parser: selenium+BeautifulSoup), поэтому для запуска необходимо скачать chromeDriver под ваш браузер.

В первом случае есть функциональный API, хорошая история и глубина данных (можно получить информацию по каждому игроку в матче), но данные есть по 6 топ-лигам.

Во втором источнике получаю данные в будущее по коэффициентам от букмекеров. В качестве итоговой рекомендации возвращаю, где конкретно выгоднее сделать ставку.

<!-- Этапы расчета -->
## Этапы расчета
1. Сбор из Understat, парсинг OddsPortal, препроцессинг, генерация признаков
2. Расчет всех событий для каждого матча
3. Выбор оптимального исхода в каждом матче
4. Оптимизация и генерация картинок с матчами
5. Запускаем бота, который выкладывает картинки в инсту (https://www.instagram.com/footballbets.tv/)
6. После того, как пройдут матчи, собираем отчет.



Пример картинки с рекомендацией:

![alt text](https://github.com/KhaitovR/footkit/blob/master/Pictures/prediction_pics/19_08_20%20Ural%20-%20Lokomotiv%20Moscow%2C%20FC%20Ufa%20-%20Spartak%20Moscow%2C%20Dinamo%20Moscow%20-%20FC%20Rostov.jpg?raw=true "Пример картинки с рекомендацией")

Пример отчета:

![alt text](https://github.com/KhaitovR/footkit/blob/master/Report/2019_11_30%20prediction.png?raw=true "Пример отчета")

